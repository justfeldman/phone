<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>West-Kids — Parent</title>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="color-scheme" content="light dark" />
<style>
  :root{ --brand:#e60000; --bg:#fff; --fg:#0f172a; --muted:#667085; --card:#f9fafb; --line:#e5e7eb; }
  @media (prefers-color-scheme: dark){
    :root{ --bg:#0b0f18; --fg:#e5e7eb; --muted:#98a2b3; --card:#111827; --line:#1f2937; }
  }
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--fg);
    font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,Helvetica,Arial,sans-serif;
    -webkit-text-size-adjust:100%;
    padding:max(16px,env(safe-area-inset-top)) max(16px,env(safe-area-inset-right))
            calc(80px + env(safe-area-inset-bottom)) max(16px,env(safe-area-inset-left));
  }
  h1{margin:0 0 12px; font-size:clamp(20px,4.5vw,28px)}
  .card{background:var(--card); border:1px solid var(--line); border-radius:16px; padding:16px; margin:12px 0}
  .row{display:flex; gap:10px; flex-wrap:wrap}
  input{font-size:16px; padding:14px 12px; border-radius:12px; border:1px solid var(--line); background:transparent; color:var(--fg); flex:1 1 160px}
  button{font-size:16px; padding:14px 18px; border-radius:12px; border:none; min-height:44px; cursor:pointer}
  .btn{background:var(--brand); color:#fff}
  .btn-ghost{background:transparent; color:var(--fg); border:1px solid var(--line)}
  table{width:100%; border-collapse:collapse}
  th,td{padding:12px 8px; border-bottom:1px solid var(--line); font-size:16px}
  .muted{color:var(--muted)}
  /* tabs */
  .tabs{position:fixed;left:0;right:0;bottom:0;display:flex;gap:10px;justify-content:space-between;
        padding:10px max(16px,env(safe-area-inset-right)) calc(10px + env(safe-area-inset-bottom)) max(16px,env(safe-area-inset-left));
        background:var(--card); border-top:1px solid var(--line)}
  .tabs a{flex:1;text-align:center;text-decoration:none;color:var(--fg);border:1px solid var(--line);border-radius:12px;padding:12px}
  .tabs a.active{background:var(--brand); color:#fff; border-color:var(--brand)}
  .tabs span{display:block; font-size:12px; opacity:.85; margin-top:4px}
</style>
</head>
<body>
  <h1>👨‍👩‍👧 West-Kids — Parent</h1>

  <div class="card">
    <h3 style="margin:0 0 8px">Add a chore</h3>
    <div class="row">
      <input id="task" placeholder="e.g., Clean room" />
      <input id="reward" type="number" step="0.01" placeholder="Reward (e.g., 5.00)" />
      <button class="btn" id="addBtn">Add</button>
    </div>
    <p class="muted" id="msg"></p>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px">Chore list</h3>
    <table>
      <thead><tr><th>Task</th><th>Reward</th><th>Status</th><th>Actions</th></tr></thead>
      <tbody id="tbody"></tbody>
    </table>
    <div class="row" style="margin-top:12px">
      <button class="btn-ghost" id="resetBtn">Reset All</button>
    </div>
  </div>

  <!-- bottom tabs -->
  <nav class="tabs">
    <a href="parent.html" class="active"><div>👨‍👩‍👧<span>Parent</span></div></a>
    <a href="child.html"><div>🧒<span>Chores</span></div></a>
    <a href="wallet.html"><div>💳<span>Wallet</span></div></a>
  </nav>

<script>
const KEY_CHORES="finchild_chores";
const $=s=>document.querySelector(s);
const escapeHtml=s=>String(s).replace(/[&<>"']/g,m=>({ "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;" }[m]));
const load=()=>JSON.parse(localStorage.getItem(KEY_CHORES)||"[]");
const save=x=>localStorage.setItem(KEY_CHORES,JSON.stringify(x));
const note=t=>{$("#msg").textContent=t; setTimeout(()=>$("#msg").textContent="",1500);};

function addChore(){
  const task=$("#task").value.trim();
  const reward=parseFloat($("#reward").value||"0");
  if(!task || isNaN(reward)||reward<=0) return note("Enter task + positive reward.");
  const cs=load(); cs.push({id:crypto.randomUUID(),task,reward:parseFloat(reward.toFixed(2)),completed:false});
  save(cs); $("#task").value=""; $("#reward").value=""; render(); note("Added ✅");
}
function toggleComplete(id){ const cs=load(); const i=cs.findIndex(c=>c.id===id); if(i<0)return; cs[i].completed=!cs[i].completed; save(cs); render(); }
function removeChore(id){ save(load().filter(c=>c.id!==id)); render(); }
function resetAll(){ if(confirm("Reset all chores?")){ save([]); render(); } }

function render(){
  const tb=$("#tbody"); tb.innerHTML="";
  load().forEach(c=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${escapeHtml(c.task)}</td><td>$${c.reward.toFixed(2)}</td>
      <td>${c.completed?"✅ Done":"⏳"}</td>
      <td>
        <button class="btn-ghost" onclick="toggleComplete('${c.id}')">${c.completed?"Undo":"Mark done"}</button>
        <button class="btn-ghost" onclick="removeChore('${c.id}')">Delete</button>
      </td>`;
    tb.appendChild(tr);
  });
}
$("#addBtn").onclick=addChore;
$("#resetBtn").onclick=resetAll;
render();
</script>
</body>
</html>
